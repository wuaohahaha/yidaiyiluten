
<!DOCTYPE html>
<html lang="zh-CN" style="height: 100%">
<head>
  <meta charset="utf-8">
</head>
<body style="height: 100%; margin: 0">
  <div id="container" style="height: 100%"></div>

  
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=4aPcxvkqWaeEiwdnPhy5dYdh1SWjaG5k"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.4.3/dist/extension/bmap.min.js"></script>


  <script type="text/javascript">
    var dom = document.getElementById('container');
    var myChart = echarts.init(dom, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    var app = {};
    
    var option;

    const data = [
{ name: '上海', value: 4430 },
    { name: '上饶', value: 1100 },
    { name: '东莞', value: 6368 },
    { name: '临沂', value: 14938 },
    { name: '义乌', value: 82224.5 },
    { name: '乌兰察布', value: 2300 },
    { name: '乌鲁木齐', value: 4904 },
    { name: '保定', value: 200 },
    { name: '兰州', value: 100 },
    { name: '北京', value: 272 },
    { name: '南京', value: 19168 },
    { name: '南昌', value: 3494 },
    { name: '厦门', value: 5858 },
    { name: '合肥', value: 41851.5 },
    { name: '哈尔滨', value: 8894 },
    { name: '唐山', value: 482 },
    { name: '大连', value: 14730 },
    { name: '天津', value: 5832 },
    { name: '太原', value: 5664 },
    { name: '奎屯', value: 3728 },
    { name: '威海', value: 388 },
    { name: '巴音郭愣', value: 196 },
    { name: '广州', value: 52140 },
    { name: '库尔勒', value: 1204 },
    { name: '徐州', value: 27814 },
    { name: '成都', value: 178156 },
    { name: '日照', value: 2390 },
    { name: '柳州', value: 1100 },
    { name: '武威', value: 392 },
    { name: '武汉', value: 49787 },
    { name: '沈阳', value: 51014 },
    { name: '济南', value: 50196 },
    { name: '淄博', value: 1586 },
    { name: '深圳', value: 20652.25 },
    { name: '潍坊', value: 586 },
    { name: '烟台', value: 778 },
    { name: '白银', value: 192 },
    { name: '石家庄', value: 27552 },
    { name: '石河子', value: 1382 },
    { name: '苏州', value: 38658 },
    { name: '西安', value: 328191 },
    { name: '赣州', value: 14588 },
    { name: '赤峰', value: 800 },
    { name: '连云港', value: 898 },
    { name: '郑州', value: 86103 },
    { name: '重庆', value: 256410.75 },
    { name: '金华', value: 30007.25 },
    { name: '银川', value: 96 },
    { name: '长春', value: 9000 },
    { name: '长沙', value: 83712 },
    { name: '阿克苏', value: 546 },
    { name: '青岛', value: 41754 },
    { name: '鹰潭', value: 588 },
    { name: '洛阳', value: 388 },
    { name: '枣庄', value: 200 },
    { name: '衡阳', value: 3884 },
    { name: '贵阳', value: 3368 },
    { name: '南平', value: 1300 },
    { name: '德阳', value: 7586 },
    { name: '南充', value: 400 },
    { name: '鄂尔多斯', value: 100 },
    { name: '九江', value: 1062 },
    { name: '德州', value: 300 },
    { name: '巴彦淖尔', value: 896 },
    { name: '呼和浩特', value: 1098 },
    { name: '胡杨河', value: 506 },
    { name: '博州', value: 301 },
    { name: '泉州', value: 1388 },
    { name: '泸州', value: 892 },
    { name: '江门', value: 182 },
    { name: '内江', value: 84 },
    { name: '龙岩', value: 688 },
    { name: '绵阳', value: 2500 },
    { name: '福州', value: 500 },
    { name: '广元', value: 290 },
    { name: '铁岭', value: 400 },
    { name: '萍乡', value: 300 },
    { name: '遂宁', value: 100 }
];
const geoCoordMap = {
    上海: [121.48, 31.22],
    上饶: [117.97, 28.45],
    东莞: [113.75, 23.04],
    临沂: [118.35, 35.05],
    义乌: [120.06, 29.32],
    乌兰察布: [113.12, 40.98],
    乌鲁木齐: [87.68, 43.77],
    保定: [115.47, 38.87],
    兰州: [103.73, 36.03],
    北京: [116.40, 39.90],
    南京: [118.78, 32.04],
    南昌: [115.89, 28.68],
    厦门: [118.10, 24.46],
    合肥: [117.27, 31.86],
    哈尔滨: [126.63, 45.75],
    唐山: [118.17, 39.63],
    大连: [121.62, 38.92],
    天津: [117.20, 39.12],
    太原: [112.53, 37.87],
    奎屯: [84.90, 44.43],
    威海: [122.12, 37.52],
    巴音郭愣: [86.15, 41.76],
    广州: [113.27, 23.13],
    库尔勒: [86.15, 41.76],
    徐州: [117.29, 34.21],
    成都: [104.06, 30.67],
    日照: [119.52, 35.42],
    柳州: [109.42, 24.33],
    武威: [102.63, 37.93],
    武汉: [114.30, 30.59],
    沈阳: [123.43, 41.80],
    济南: [117.00, 36.65],
    淄博: [118.05, 36.82],
    深圳: [114.07, 22.62],
    潍坊: [119.10, 36.62],
    烟台: [121.39, 37.52],
    白银: [104.18, 36.55],
    石家庄: [114.52, 38.04],
    石河子: [86.04, 44.30],
    苏州: [120.62, 31.32],
    西安: [108.94, 34.34],
    赣州: [114.94, 25.85],
    赤峰: [118.88, 42.28],
    连云港: [119.16, 34.59],
    郑州: [113.62, 34.75],
    重庆: [106.55, 29.57],
    金华: [119.64, 29.12],
    银川: [106.23, 38.49],
    长春: [125.35, 43.88],
    长沙: [112.94, 28.23],
    阿克苏: [80.26, 41.17],
    青岛: [120.38, 36.07],
    鹰潭: [117.05, 28.08],
    洛阳: [112.44, 34.70],
    枣庄: [117.57, 34.86],
    衡阳: [112.61, 26.89],
    贵阳: [106.71, 26.58],
    南平: [118.18, 26.64],
    德阳: [104.40, 31.13],
    南充: [106.08, 30.78],
    鄂尔多斯: [109.99, 39.81],
    九江: [115.97, 29.71],
    德州: [116.29, 37.45],
    巴彦淖尔: [107.39, 40.75],
    呼和浩特: [111.73, 40.83],
    胡杨河: [84.95, 47.75],
    博州: [82.07, 44.90],
    泉州: [118.68, 24.88],
    泸州: [105.39, 28.91],
    江门: [113.08, 22.58],
    内江: [105.04, 29.59],
    龙岩: [117.03, 25.08],
    绵阳: [104.73, 31.48],
    福州: [119.30, 26.08],
    广元: [105.83, 32.43],
    铁岭: [123.85, 42.30],
    萍乡: [113.85, 27.62],
    遂宁: [105.59, 30.52]
};
const convertData = function (data) {
  var res = [];
  for (var i = 0; i < data.length; i++) {
    var geoCoord = geoCoordMap[data[i].name];
    if (geoCoord) {
      res.push({
        name: data[i].name,
        value: geoCoord.concat(data[i].value)
      });
    }
  }
  return res;
};
option = {
  title: {
    text: '',
    left: 'center'
  },
  tooltip: {
    trigger: 'item'
  },
  bmap: {
    center: [104.114129, 37.550339],
    zoom: 6,
    roam: false,
    mapStyle: {
      styleJson: [
        {
          featureType: 'water',
          elementType: 'all',
          stylers: {
            color: '#d1d1d1'
          }
        },
        {
          featureType: 'land',
          elementType: 'all',
          stylers: {
            color: '#f3f3f3'
          }
        },
        {
          featureType: 'railway',
          elementType: 'all',
          stylers: {
            visibility: 'off'
          }
        },
        {
          featureType: 'highway',
          elementType: 'all',
          stylers: {
            color: '#fdfdfd'
          }
        },
        {
          featureType: 'highway',
          elementType: 'labels',
          stylers: {
            visibility: 'off'
          }
        },
        {
          featureType: 'arterial',
          elementType: 'geometry',
          stylers: {
            color: '#fefefe'
          }
        },
        {
          featureType: 'arterial',
          elementType: 'geometry.fill',
          stylers: {
            color: '#fefefe'
          }
        },
        {
          featureType: 'poi',
          elementType: 'all',
          stylers: {
            visibility: 'off'
          }
        },
        {
          featureType: 'green',
          elementType: 'all',
          stylers: {
            visibility: 'off'
          }
        },
        {
          featureType: 'subway',
          elementType: 'all',
          stylers: {
            visibility: 'off'
          }
        },
        {
          featureType: 'manmade',
          elementType: 'all',
          stylers: {
            color: '#d1d1d1'
          }
        },
        {
          featureType: 'local',
          elementType: 'all',
          stylers: {
            color: '#d1d1d1'
          }
        },
        {
          featureType: 'arterial',
          elementType: 'labels',
          stylers: {
            visibility: 'off'
          }
        },
        {
          featureType: 'boundary',
          elementType: 'all',
          stylers: {
            color: '#fefefe'
          }
        },
        {
          featureType: 'building',
          elementType: 'all',
          stylers: {
            color: '#d1d1d1'
          }
        },
        {
          featureType: 'label',
          elementType: 'labels.text.fill',
          stylers: {
            color: '#999999'
          }
        }
      ]
    }
  },
  series: [
    {
      name: '发送箱（TEU）',
      type: 'scatter',
      coordinateSystem: 'bmap',
      data: convertData(data),
      symbolSize: function (val) {
        return val[2] / 3000;
      },
      encode: {
        value: 2
      },
      label: {
        formatter: '{b}',
        position: 'right',
        show: false
      },
    itemStyle: {
        color: 'rgba(35, 166, 220, 0.7)',
        shadowBlur: 10,
        shadowColor: '#fff',
    },
      emphasis: {
        label: {
          show: true
        }
      }
    },
    {
      name: 'Top 5',
      type: 'effectScatter',
      coordinateSystem: 'bmap',
      data: convertData(
        data
          .sort(function (a, b) {
            return b.value - a.value;
          })
          .slice(0, 6)
      ),
      symbolSize: function (val) {
        return val[2] / 3000;
      },
      encode: {
        value: 2
      },
      showEffectOn: 'render',
      rippleEffect: {
        brushType: 'stroke'
      },
      label: {
        formatter: '{b}',
        position: 'right',
        show: true
      },
      itemStyle: {
        shadowBlur: 10,
        color: 'rgba(35, 166, 220, 0.7)',
        shadowColor: '#fff',

      },
      emphasis: {
        scale: true
      },
      zlevel: 1
    }
  ]
};

    if (option && typeof option === 'object') {
      myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
  </script>
</body>
</html>