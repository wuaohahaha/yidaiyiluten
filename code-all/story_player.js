var Flourish=function(e){"use strict";function t(e,t,n,r,i){for(var o in e.getVersionNumber=function(){return e.version_number},e.setVersionNumber=function(t){e.version_number=t},e.id=t,e.version_number=n||0,r)e[o]=r[o];if(i)for(var o in i)e[o]=i[o]}function n(e,n,r){t(this,"object"==typeof n?(r=n).id:n,void 0,r),this.visualisation=e}function r(e,r,i){if(t(this,e,r,i),this.data_tables){var o=this;this.data_tables=this.data_tables.map((function(e){return new n(o,e)}))}}function i(e){if(!(e.length<=2))return"set"===e[0]?e[2]=""+e[2]:"send"===e[0]&&"event"===e[1]&&("string"==typeof e[2]||e[2]instanceof String?e.length>=5&&(e[4]=""+e[4]):"eventLabel"in e[2]&&(e[2].eventLabel=""+e[2].eventLabel)),e}r.prototype.settingsForCurrentTemplate=function(){return this.settings&&this.template_id in this.settings?this.settings[this.template_id]:{}};var o,a,s,l,u=!1,c=!1;function d(){this._current_time=0,this.paused=!0,this._listeners=[]}function f(){var e=document.querySelector(".play-pause.small").getBoundingClientRect(),t=document.querySelector(".play-pause.large"),n=getComputedStyle(t),r=parseInt(n.left),i=parseInt(n.top),o=null;requestAnimationFrame((function n(a){null==o&&(o=a);var s=a-o,l=Math.min(1,Math.max(0,s/1e3)),u=51*(1-l),c=51*(1-l),d=51*(1-l),f=1-l+.3*l,p=-50*(1-l)+"%",h=-50*(1-l)+"%",m=2.5*(1-l)+1*l;t.style.left=r*(1-l)+(e.left||0)*l+"px",t.style.top=i*(1-l)+(e.top||0)*l+"px",t.style.transform="translate("+p+","+h+") scale("+m+")",t.style.background="rgba("+u+","+c+","+d+","+f+")",l<1?requestAnimationFrame(n):t.parentNode.removeChild(t)}))}function p(){a.paused?h():m()}function h(){g(a.currentTime)>=o.story.slides.length&&(a.currentTime=0),a.play();for(var e=document.querySelectorAll("nav .play-pause"),t=0;t<e.length;t++)e[t].classList.add("playing");c||f(),c=!0}function m(){a.pause();for(var e=document.querySelectorAll("nav .play-pause"),t=0;t<e.length;t++)e[t].classList.remove("playing")}function g(e){for(var t=l.length-1;t>=0;t--)if(e>=l[t].timecode)return t}function v(){var e=g(this.currentTime);o.current_slide.index!==l[e].index&&(e<o.story.slides.length?u=s(l[e].index):(m(),o.story.loops_at_end&&h()))}function y(){a&&a.removeEventListener("timeupdate",v),o.story.is_timed?(a=o.story.audio_url?document.getElementById("story-audio-file"):new d).addEventListener("timeupdate",v):a=null}function _(){var e=0;(l=o.story.slides.map((function(t,n){var r=null==t.duration?o.story.default_slide_duration:t.duration;return{timecode:e+=r,index:n+1}}))).unshift({timecode:0,index:0})}function b(e){a&&(u?u=!1:a.currentTime=l[e].timecode)}d.prototype={get currentTime(){return this._current_time},set currentTime(e){void 0!==this._played_from&&(this._played_from+=e-this._current_time),this._current_time=e}},d.prototype.addEventListener=function(e,t){if("timeupdate"!==e)throw new Error("Event type unsupported - must be timeupdate, not "+e);this._listeners.push(t)},d.prototype.removeEventListener=function(e,t){if("timeupdate"!==e)throw new Error("Event type unsupported - must be timeupdate, not "+e);this._listeners=[]},d.prototype.play=function(){var e=this;this.paused=!1,this._played_from=e._current_time,this._t0=null,requestAnimationFrame((function t(n){e.paused||(null==e._t0&&(e._t0=n),e._current_time=e._played_from+(n-e._t0)/1e3,e._listeners.forEach((function(t){t.call(e)})),requestAnimationFrame(t))})),c||f(),c=!0},d.prototype.pause=function(){this.paused=!0},
/*! Raven.js 3.27.2 (6d91db933) | github.com/getsentry/raven-js */
function(t){if("object"==typeof e&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Raven=t()}}((function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){var n=t[a][1][e];return i(n||e)}),c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){function r(e){this.name="RavenConfigError",this.message=e}r.prototype=new Error,r.prototype.constructor=r,t.exports=r},{}],2:[function(e,t,n){var r=e(5);t.exports={wrapMethod:function(e,t,n){var i=e[t],o=e;if(t in e){var a="warn"===t?"warning":t;e[t]=function(){var e=[].slice.call(arguments),s=r.safeJoin(e," "),l={level:a,logger:"console",extra:{arguments:e}};"assert"===t?!1===e[0]&&(s="Assertion failed: "+(r.safeJoin(e.slice(1)," ")||"console.assert"),l.extra.arguments=e.slice(1),n&&n(s,l)):n&&n(s,l),i&&Function.prototype.apply.call(i,o,e)}}}}},{5:5}],3:[function(e,t,n){(function(n){var r=e(6),i=e(7),o=e(8),a=e(1),s=e(5),l=s.isErrorEvent,u=s.isDOMError,c=s.isDOMException,d=s.isError,f=s.isObject,p=s.isPlainObject,h=s.isUndefined,m=s.isFunction,g=s.isString,v=s.isArray,y=s.isEmptyObject,_=s.each,b=s.objectMerge,w=s.truncate,x=s.objectFrozen,E=s.hasKey,S=s.joinRegExp,k=s.urlencode,O=s.uuid4,A=s.htmlTreeAsString,T=s.isSameException,C=s.isSameStacktrace,R=s.parseUrl,D=s.fill,L=s.supportsFetch,F=s.supportsReferrerPolicy,j=s.serializeKeysForMessage,N=s.serializeException,M=s.sanitize,H=e(2).wrapMethod,I="source protocol user pass host port path".split(" "),U=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/;function q(){return+new Date}var P="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},B=P.document,z=P.navigator;function W(e,t){return m(t)?function(n){return t(n,e)}:t}function $(){for(var e in this._hasJSON=!("object"!=typeof JSON||!JSON.stringify),this._hasDocument=!h(B),this._hasNavigator=!h(z),this._lastCapturedException=null,this._lastData=null,this._lastEventId=null,this._globalServer=null,this._globalKey=null,this._globalProject=null,this._globalContext={},this._globalOptions={release:P.SENTRY_RELEASE&&P.SENTRY_RELEASE.id,logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],headers:null,collectWindowErrors:!0,captureUnhandledRejections:!0,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,autoBreadcrumbs:!0,instrument:!0,sampleRate:1,sanitizeKeys:[]},this._fetchDefaults={method:"POST",referrerPolicy:F()?"origin":""},this._ignoreOnError=0,this._isRavenInstalled=!1,this._originalErrorStackTraceLimit=Error.stackTraceLimit,this._originalConsole=P.console||{},this._originalConsoleMethods={},this._plugins=[],this._startTime=q(),this._wrappedBuiltIns=[],this._breadcrumbs=[],this._lastCapturedEvent=null,this._keypressTimeout,this._location=P.location,this._lastHref=this._location&&this._location.href,this._resetBackoff(),this._originalConsole)this._originalConsoleMethods[e]=this._originalConsole[e]}$.prototype={VERSION:"3.27.2",debug:!1,TraceKit:r,config:function(e,t){var n=this;if(n._globalServer)return this._logDebug("error","Error: Raven has already been configured"),n;if(!e)return n;var i=n._globalOptions;t&&_(t,(function(e,t){"tags"===e||"extra"===e||"user"===e?n._globalContext[e]=t:i[e]=t})),n.setDSN(e),i.ignoreErrors.push(/^Script error\.?$/),i.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),i.ignoreErrors=S(i.ignoreErrors),i.ignoreUrls=!!i.ignoreUrls.length&&S(i.ignoreUrls),i.whitelistUrls=!!i.whitelistUrls.length&&S(i.whitelistUrls),i.includePaths=S(i.includePaths),i.maxBreadcrumbs=Math.max(0,Math.min(i.maxBreadcrumbs||100,100));var o={xhr:!0,console:!0,dom:!0,location:!0,sentry:!0},a=i.autoBreadcrumbs;"[object Object]"==={}.toString.call(a)?a=b(o,a):!1!==a&&(a=o),i.autoBreadcrumbs=a;var s={tryCatch:!0},l=i.instrument;return"[object Object]"==={}.toString.call(l)?l=b(s,l):!1!==l&&(l=s),i.instrument=l,r.collectWindowErrors=!!i.collectWindowErrors,n},install:function(){var e=this;return e.isSetup()&&!e._isRavenInstalled&&(r.report.subscribe((function(){e._handleOnErrorStackInfo.apply(e,arguments)})),e._globalOptions.captureUnhandledRejections&&e._attachPromiseRejectionHandler(),e._patchFunctionToString(),e._globalOptions.instrument&&e._globalOptions.instrument.tryCatch&&e._instrumentTryCatch(),e._globalOptions.autoBreadcrumbs&&e._instrumentBreadcrumbs(),e._drainPlugins(),e._isRavenInstalled=!0),Error.stackTraceLimit=e._globalOptions.stackTraceLimit,this},setDSN:function(e){var t=this,n=t._parseDSN(e),r=n.path.lastIndexOf("/"),i=n.path.substr(1,r);t._dsn=e,t._globalKey=n.user,t._globalSecret=n.pass&&n.pass.substr(1),t._globalProject=n.path.substr(r+1),t._globalServer=t._getGlobalServer(n),t._globalEndpoint=t._globalServer+"/"+i+"api/"+t._globalProject+"/store/",this._resetBackoff()},context:function(e,t,n){return m(e)&&(n=t||[],t=e,e={}),this.wrap(e,t).apply(this,n)},wrap:function(e,t,n){var r=this;if(h(t)&&!m(e))return e;if(m(e)&&(t=e,e=void 0),!m(t))return t;try{if(t.__raven__)return t;if(t.__raven_wrapper__)return t.__raven_wrapper__}catch(e){return t}function i(){var i=[],o=arguments.length,a=!e||e&&!1!==e.deep;for(n&&m(n)&&n.apply(this,arguments);o--;)i[o]=a?r.wrap(e,arguments[o]):arguments[o];try{return t.apply(this,i)}catch(t){throw r._ignoreNextOnError(),r.captureException(t,e),t}}for(var o in t)E(t,o)&&(i[o]=t[o]);return i.prototype=t.prototype,t.__raven_wrapper__=i,i.__raven__=!0,i.__orig__=t,i},uninstall:function(){return r.report.uninstall(),this._detachPromiseRejectionHandler(),this._unpatchFunctionToString(),this._restoreBuiltIns(),this._restoreConsole(),Error.stackTraceLimit=this._originalErrorStackTraceLimit,this._isRavenInstalled=!1,this},_promiseRejectionHandler:function(e){this._logDebug("debug","Raven caught unhandled promise rejection:",e),this.captureException(e.reason,{mechanism:{type:"onunhandledrejection",handled:!1}})},_attachPromiseRejectionHandler:function(){return this._promiseRejectionHandler=this._promiseRejectionHandler.bind(this),P.addEventListener&&P.addEventListener("unhandledrejection",this._promiseRejectionHandler),this},_detachPromiseRejectionHandler:function(){return P.removeEventListener&&P.removeEventListener("unhandledrejection",this._promiseRejectionHandler),this},captureException:function(e,t){if(t=b({trimHeadFrames:0},t||{}),l(e)&&e.error)e=e.error;else{if(u(e)||c(e)){var n=e.name||(u(e)?"DOMError":"DOMException"),i=e.message?n+": "+e.message:n;return this.captureMessage(i,b(t,{stacktrace:!0,trimHeadFrames:t.trimHeadFrames+1}))}if(d(e))e=e;else{if(!p(e))return this.captureMessage(e,b(t,{stacktrace:!0,trimHeadFrames:t.trimHeadFrames+1}));t=this._getCaptureExceptionOptionsFromPlainObject(t,e),e=new Error(t.message)}}this._lastCapturedException=e;try{var o=r.computeStackTrace(e);this._handleStackInfo(o,t)}catch(t){if(e!==t)throw t}return this},_getCaptureExceptionOptionsFromPlainObject:function(e,t){var n=Object.keys(t).sort(),r=b(e,{message:"Non-Error exception captured with keys: "+j(n),fingerprint:[o(n)],extra:e.extra||{}});return r.extra.__serialized__=N(t),r},captureMessage:function(e,t){if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(e)){var n,i=b({message:e+=""},t=t||{});try{throw new Error(e)}catch(e){n=e}n.name=null;var o=r.computeStackTrace(n),a=v(o.stack)&&o.stack[1];a&&"Raven.captureException"===a.func&&(a=o.stack[2]);var s=a&&a.url||"";if((!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(s))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(s))){if(this._globalOptions.stacktrace||t.stacktrace||""===i.message){i.fingerprint=null==i.fingerprint?e:i.fingerprint,(t=b({trimHeadFrames:0},t)).trimHeadFrames+=1;var l=this._prepareFrames(o,t);i.stacktrace={frames:l.reverse()}}return i.fingerprint&&(i.fingerprint=v(i.fingerprint)?i.fingerprint:[i.fingerprint]),this._send(i),this}}},captureBreadcrumb:function(e){var t=b({timestamp:q()/1e3},e);if(m(this._globalOptions.breadcrumbCallback)){var n=this._globalOptions.breadcrumbCallback(t);if(f(n)&&!y(n))t=n;else if(!1===n)return this}return this._breadcrumbs.push(t),this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs&&this._breadcrumbs.shift(),this},addPlugin:function(e){var t=[].slice.call(arguments,1);return this._plugins.push([e,t]),this._isRavenInstalled&&this._drainPlugins(),this},setUserContext:function(e){return this._globalContext.user=e,this},setExtraContext:function(e){return this._mergeContext("extra",e),this},setTagsContext:function(e){return this._mergeContext("tags",e),this},clearContext:function(){return this._globalContext={},this},getContext:function(){return JSON.parse(i(this._globalContext))},setEnvironment:function(e){return this._globalOptions.environment=e,this},setRelease:function(e){return this._globalOptions.release=e,this},setDataCallback:function(e){var t=this._globalOptions.dataCallback;return this._globalOptions.dataCallback=W(t,e),this},setBreadcrumbCallback:function(e){var t=this._globalOptions.breadcrumbCallback;return this._globalOptions.breadcrumbCallback=W(t,e),this},setShouldSendCallback:function(e){var t=this._globalOptions.shouldSendCallback;return this._globalOptions.shouldSendCallback=W(t,e),this},setTransport:function(e){return this._globalOptions.transport=e,this},lastException:function(){return this._lastCapturedException},lastEventId:function(){return this._lastEventId},isSetup:function(){return!!this._hasJSON&&(!!this._globalServer||(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this._logDebug("error","Error: Raven has not been configured.")),!1))},afterLoad:function(){var e=P.RavenConfig;e&&this.config(e.dsn,e.config).install()},showReportDialog:function(e){if(B){if(!(e=b({eventId:this.lastEventId(),dsn:this._dsn,user:this._globalContext.user||{}},e)).eventId)throw new a("Missing eventId");if(!e.dsn)throw new a("Missing DSN");var t=encodeURIComponent,n=[];for(var r in e)if("user"===r){var i=e.user;i.name&&n.push("name="+t(i.name)),i.email&&n.push("email="+t(i.email))}else n.push(t(r)+"="+t(e[r]));var o=this._getGlobalServer(this._parseDSN(e.dsn)),s=B.createElement("script");s.async=!0,s.src=o+"/api/embed/error-page/?"+n.join("&"),(B.head||B.body).appendChild(s)}},_ignoreNextOnError:function(){var e=this;this._ignoreOnError+=1,setTimeout((function(){e._ignoreOnError-=1}))},_triggerEvent:function(e,t){var n,r;if(this._hasDocument){for(r in t=t||{},e="raven"+e.substr(0,1).toUpperCase()+e.substr(1),B.createEvent?(n=B.createEvent("HTMLEvents")).initEvent(e,!0,!0):(n=B.createEventObject()).eventType=e,t)E(t,r)&&(n[r]=t[r]);if(B.createEvent)B.dispatchEvent(n);else try{B.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(e){}}},_breadcrumbEventHandler:function(e){var t=this;return function(n){if(t._keypressTimeout=null,t._lastCapturedEvent!==n){var r;t._lastCapturedEvent=n;try{r=A(n.target)}catch(e){r="<unknown>"}t.captureBreadcrumb({category:"ui."+e,message:r})}}},_keypressEventHandler:function(){var e=this;return function(t){var n;try{n=t.target}catch(e){return}var r=n&&n.tagName;if(r&&("INPUT"===r||"TEXTAREA"===r||n.isContentEditable)){var i=e._keypressTimeout;i||e._breadcrumbEventHandler("input")(t),clearTimeout(i),e._keypressTimeout=setTimeout((function(){e._keypressTimeout=null}),1e3)}}},_captureUrlChange:function(e,t){var n=R(this._location.href),r=R(t),i=R(e);this._lastHref=t,n.protocol===r.protocol&&n.host===r.host&&(t=r.relative),n.protocol===i.protocol&&n.host===i.host&&(e=i.relative),this.captureBreadcrumb({category:"navigation",data:{to:t,from:e}})},_patchFunctionToString:function(){var e=this;e._originalFunctionToString=Function.prototype.toString,Function.prototype.toString=function(){return"function"==typeof this&&this.__raven__?e._originalFunctionToString.apply(this.__orig__,arguments):e._originalFunctionToString.apply(this,arguments)}},_unpatchFunctionToString:function(){this._originalFunctionToString&&(Function.prototype.toString=this._originalFunctionToString)},_instrumentTryCatch:function(){var e=this,t=e._wrappedBuiltIns;function n(t){return function(n,r){for(var i=new Array(arguments.length),o=0;o<i.length;++o)i[o]=arguments[o];var a=i[0];return m(a)&&(i[0]=e.wrap({mechanism:{type:"instrument",data:{function:t.name||"<anonymous>"}}},a)),t.apply?t.apply(this,i):t(i[0],i[1])}}var r=this._globalOptions.autoBreadcrumbs;function i(n){var i=P[n]&&P[n].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(D(i,"addEventListener",(function(t){return function(i,o,a,s){try{o&&o.handleEvent&&(o.handleEvent=e.wrap({mechanism:{type:"instrument",data:{target:n,function:"handleEvent",handler:o&&o.name||"<anonymous>"}}},o.handleEvent))}catch(e){}var l,u,c;return r&&r.dom&&("EventTarget"===n||"Node"===n)&&(u=e._breadcrumbEventHandler("click"),c=e._keypressEventHandler(),l=function(e){if(e){var t;try{t=e.type}catch(e){return}return"click"===t?u(e):"keypress"===t?c(e):void 0}}),t.call(this,i,e.wrap({mechanism:{type:"instrument",data:{target:n,function:"addEventListener",handler:o&&o.name||"<anonymous>"}}},o,l),a,s)}}),t),D(i,"removeEventListener",(function(e){return function(t,n,r,i){try{n=n&&(n.__raven_wrapper__?n.__raven_wrapper__:n)}catch(e){}return e.call(this,t,n,r,i)}}),t))}D(P,"setTimeout",n,t),D(P,"setInterval",n,t),P.requestAnimationFrame&&D(P,"requestAnimationFrame",(function(t){return function(n){return t(e.wrap({mechanism:{type:"instrument",data:{function:"requestAnimationFrame",handler:t&&t.name||"<anonymous>"}}},n))}}),t);for(var o=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],a=0;a<o.length;a++)i(o[a])},_instrumentBreadcrumbs:function(){var e=this,t=this._globalOptions.autoBreadcrumbs,n=e._wrappedBuiltIns;function r(t,n){t in n&&m(n[t])&&D(n,t,(function(n){return e.wrap({mechanism:{type:"instrument",data:{function:t,handler:n&&n.name||"<anonymous>"}}},n)}))}if(t.xhr&&"XMLHttpRequest"in P){var i=P.XMLHttpRequest&&P.XMLHttpRequest.prototype;D(i,"open",(function(t){return function(n,r){return g(r)&&-1===r.indexOf(e._globalKey)&&(this.__raven_xhr={method:n,url:r,status_code:null}),t.apply(this,arguments)}}),n),D(i,"send",(function(t){return function(){var n=this;function i(){if(n.__raven_xhr&&4===n.readyState){try{n.__raven_xhr.status_code=n.status}catch(e){}e.captureBreadcrumb({type:"http",category:"xhr",data:n.__raven_xhr})}}for(var o=["onload","onerror","onprogress"],a=0;a<o.length;a++)r(o[a],n);return"onreadystatechange"in n&&m(n.onreadystatechange)?D(n,"onreadystatechange",(function(t){return e.wrap({mechanism:{type:"instrument",data:{function:"onreadystatechange",handler:t&&t.name||"<anonymous>"}}},t,i)})):n.onreadystatechange=i,t.apply(this,arguments)}}),n)}t.xhr&&L()&&D(P,"fetch",(function(t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;++r)n[r]=arguments[r];var i,o=n[0],a="GET";if("string"==typeof o?i=o:"Request"in P&&o instanceof P.Request?(i=o.url,o.method&&(a=o.method)):i=""+o,-1!==i.indexOf(e._globalKey))return t.apply(this,n);n[1]&&n[1].method&&(a=n[1].method);var s={method:a,url:i,status_code:null};return t.apply(this,n).then((function(t){return s.status_code=t.status,e.captureBreadcrumb({type:"http",category:"fetch",data:s}),t})).catch((function(t){throw e.captureBreadcrumb({type:"http",category:"fetch",data:s,level:"error"}),t}))}}),n),t.dom&&this._hasDocument&&(B.addEventListener?(B.addEventListener("click",e._breadcrumbEventHandler("click"),!1),B.addEventListener("keypress",e._keypressEventHandler(),!1)):B.attachEvent&&(B.attachEvent("onclick",e._breadcrumbEventHandler("click")),B.attachEvent("onkeypress",e._keypressEventHandler())));var o=P.chrome,a=!(o&&o.app&&o.app.runtime)&&P.history&&P.history.pushState&&P.history.replaceState;if(t.location&&a){var s=P.onpopstate;P.onpopstate=function(){var t=e._location.href;if(e._captureUrlChange(e._lastHref,t),s)return s.apply(this,arguments)};var l=function(t){return function(){var n=arguments.length>2?arguments[2]:void 0;return n&&e._captureUrlChange(e._lastHref,n+""),t.apply(this,arguments)}};D(P.history,"pushState",l,n),D(P.history,"replaceState",l,n)}if(t.console&&"console"in P&&console.log){var u=function(t,n){e.captureBreadcrumb({message:t,level:n.level,category:"console"})};_(["debug","info","warn","error","log"],(function(e,t){H(console,t,u)}))}},_restoreBuiltIns:function(){for(var e;this._wrappedBuiltIns.length;){var t=(e=this._wrappedBuiltIns.shift())[0],n=e[1],r=e[2];t[n]=r}},_restoreConsole:function(){for(var e in this._originalConsoleMethods)this._originalConsole[e]=this._originalConsoleMethods[e]},_drainPlugins:function(){var e=this;_(this._plugins,(function(t,n){var r=n[0],i=n[1];r.apply(e,[e].concat(i))}))},_parseDSN:function(e){var t=U.exec(e),n={},r=7;try{for(;r--;)n[I[r]]=t[r]||""}catch(t){throw new a("Invalid DSN: "+e)}if(n.pass&&!this._globalOptions.allowSecretKey)throw new a("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return n},_getGlobalServer:function(e){var t="//"+e.host+(e.port?":"+e.port:"");return e.protocol&&(t=e.protocol+":"+t),t},_handleOnErrorStackInfo:function(e,t){(t=t||{}).mechanism=t.mechanism||{type:"onerror",handled:!1},this._ignoreOnError||this._handleStackInfo(e,t)},_handleStackInfo:function(e,t){var n=this._prepareFrames(e,t);this._triggerEvent("handle",{stackInfo:e,options:t}),this._processException(e.name,e.message,e.url,e.lineno,n,t)},_prepareFrames:function(e,t){var n=this,r=[];if(e.stack&&e.stack.length&&(_(e.stack,(function(t,i){var o=n._normalizeFrame(i,e.url);o&&r.push(o)})),t&&t.trimHeadFrames))for(var i=0;i<t.trimHeadFrames&&i<r.length;i++)r[i].in_app=!1;return r=r.slice(0,this._globalOptions.stackTraceLimit)},_normalizeFrame:function(e,t){var n={filename:e.url,lineno:e.line,colno:e.column,function:e.func||"?"};return e.url||(n.filename=t),n.in_app=!(this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(n.filename)||/(Raven|TraceKit)\./.test(n.function)||/raven\.(min\.)?js$/.test(n.filename)),n},_processException:function(e,t,n,r,i,o){var a,s=(e?e+": ":"")+(t||"");if((!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(t)&&!this._globalOptions.ignoreErrors.test(s))&&(i&&i.length?(n=i[0].filename||n,i.reverse(),a={frames:i}):n&&(a={frames:[{filename:n,lineno:r,in_app:!0}]}),(!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(n))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(n)))){var l=b({exception:{values:[{type:e,value:t,stacktrace:a}]},transaction:n},o),u=l.exception.values[0];null==u.type&&""===u.value&&(u.value="Unrecoverable error caught"),!l.exception.mechanism&&l.mechanism&&(l.exception.mechanism=l.mechanism,delete l.mechanism),l.exception.mechanism=b({type:"generic",handled:!0},l.exception.mechanism||{}),this._send(l)}},_trimPacket:function(e){var t=this._globalOptions.maxMessageLength;if(e.message&&(e.message=w(e.message,t)),e.exception){var n=e.exception.values[0];n.value=w(n.value,t)}var r=e.request;return r&&(r.url&&(r.url=w(r.url,this._globalOptions.maxUrlLength)),r.Referer&&(r.Referer=w(r.Referer,this._globalOptions.maxUrlLength))),e.breadcrumbs&&e.breadcrumbs.values&&this._trimBreadcrumbs(e.breadcrumbs),e},_trimBreadcrumbs:function(e){for(var t,n,r,i=["to","from","url"],o=0;o<e.values.length;++o)if((n=e.values[o]).hasOwnProperty("data")&&f(n.data)&&!x(n.data)){r=b({},n.data);for(var a=0;a<i.length;++a)t=i[a],r.hasOwnProperty(t)&&r[t]&&(r[t]=w(r[t],this._globalOptions.maxUrlLength));e.values[o].data=r}},_getHttpData:function(){if(this._hasNavigator||this._hasDocument){var e={};return this._hasNavigator&&z.userAgent&&(e.headers={"User-Agent":z.userAgent}),P.location&&P.location.href&&(e.url=P.location.href),this._hasDocument&&B.referrer&&(e.headers||(e.headers={}),e.headers.Referer=B.referrer),e}},_resetBackoff:function(){this._backoffDuration=0,this._backoffStart=null},_shouldBackoff:function(){return this._backoffDuration&&q()-this._backoffStart<this._backoffDuration},_isRepeatData:function(e){var t=this._lastData;return!(!t||e.message!==t.message||e.transaction!==t.transaction)&&(e.stacktrace||t.stacktrace?C(e.stacktrace,t.stacktrace):e.exception||t.exception?T(e.exception,t.exception):!e.fingerprint&&!t.fingerprint||Boolean(e.fingerprint&&t.fingerprint)&&JSON.stringify(e.fingerprint)===JSON.stringify(t.fingerprint))},_setBackoffState:function(e){if(!this._shouldBackoff()){var t=e.status;if(400===t||401===t||429===t){var n;try{n=L()?e.headers.get("Retry-After"):e.getResponseHeader("Retry-After"),n=1e3*parseInt(n,10)}catch(e){}this._backoffDuration=n||(2*this._backoffDuration||1e3),this._backoffStart=q()}}},_send:function(e){var t=this._globalOptions,n={project:this._globalProject,logger:t.logger,platform:"javascript"},r=this._getHttpData();r&&(n.request=r),e.trimHeadFrames&&delete e.trimHeadFrames,(e=b(n,e)).tags=b(b({},this._globalContext.tags),e.tags),e.extra=b(b({},this._globalContext.extra),e.extra),e.extra["session:duration"]=q()-this._startTime,this._breadcrumbs&&this._breadcrumbs.length>0&&(e.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}),this._globalContext.user&&(e.user=this._globalContext.user),t.environment&&(e.environment=t.environment),t.release&&(e.release=t.release),t.serverName&&(e.server_name=t.serverName),e=this._sanitizeData(e),Object.keys(e).forEach((function(t){(null==e[t]||""===e[t]||y(e[t]))&&delete e[t]})),m(t.dataCallback)&&(e=t.dataCallback(e)||e),e&&!y(e)&&(m(t.shouldSendCallback)&&!t.shouldSendCallback(e)||(this._shouldBackoff()?this._logDebug("warn","Raven dropped error due to backoff: ",e):"number"==typeof t.sampleRate?Math.random()<t.sampleRate&&this._sendProcessedPayload(e):this._sendProcessedPayload(e)))},_sanitizeData:function(e){return M(e,this._globalOptions.sanitizeKeys)},_getUuid:function(){return O()},_sendProcessedPayload:function(e,t){var n=this,r=this._globalOptions;if(this.isSetup())if(e=this._trimPacket(e),this._globalOptions.allowDuplicates||!this._isRepeatData(e)){this._lastEventId=e.event_id||(e.event_id=this._getUuid()),this._lastData=e,this._logDebug("debug","Raven about to send:",e);var i={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this._globalKey};this._globalSecret&&(i.sentry_secret=this._globalSecret);var o=e.exception&&e.exception.values[0];this._globalOptions.autoBreadcrumbs&&this._globalOptions.autoBreadcrumbs.sentry&&this.captureBreadcrumb({category:"sentry",message:o?(o.type?o.type+": ":"")+o.value:e.message,event_id:e.event_id,level:e.level||"error"});var a=this._globalEndpoint;(r.transport||this._makeRequest).call(this,{url:a,auth:i,data:e,options:r,onSuccess:function(){n._resetBackoff(),n._triggerEvent("success",{data:e,src:a}),t&&t()},onError:function(r){n._logDebug("error","Raven transport failed to send: ",r),r.request&&n._setBackoffState(r.request),n._triggerEvent("failure",{data:e,src:a}),r=r||new Error("Raven send failed (no additional details provided)"),t&&t(r)}})}else this._logDebug("warn","Raven dropped repeat event: ",e)},_makeRequest:function(e){var t=e.url+"?"+k(e.auth),n=null,r={};if(e.options.headers&&(n=this._evaluateHash(e.options.headers)),e.options.fetchParameters&&(r=this._evaluateHash(e.options.fetchParameters)),L()){r.body=i(e.data);var o=b({},this._fetchDefaults),a=b(o,r);return n&&(a.headers=n),P.fetch(t,a).then((function(t){if(t.ok)e.onSuccess&&e.onSuccess();else{var n=new Error("Sentry error code: "+t.status);n.request=t,e.onError&&e.onError(n)}})).catch((function(){e.onError&&e.onError(new Error("Sentry error code: network unavailable"))}))}var s=P.XMLHttpRequest&&new P.XMLHttpRequest;s&&(("withCredentials"in s||"undefined"!=typeof XDomainRequest)&&("withCredentials"in s?s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status)e.onSuccess&&e.onSuccess();else if(e.onError){var t=new Error("Sentry error code: "+s.status);t.request=s,e.onError(t)}}:(s=new XDomainRequest,t=t.replace(/^https?:/,""),e.onSuccess&&(s.onload=e.onSuccess),e.onError&&(s.onerror=function(){var t=new Error("Sentry error code: XDomainRequest");t.request=s,e.onError(t)})),s.open("POST",t),n&&_(n,(function(e,t){s.setRequestHeader(e,t)})),s.send(i(e.data))))},_evaluateHash:function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];t[n]="function"==typeof r?r():r}return t},_logDebug:function(e){this._originalConsoleMethods[e]&&(this.debug||this._globalOptions.debug)&&Function.prototype.apply.call(this._originalConsoleMethods[e],this._originalConsole,[].slice.call(arguments,1))},_mergeContext:function(e,t){h(t)?delete this._globalContext[e]:this._globalContext[e]=b(this._globalContext[e]||{},t)}},$.prototype.setUser=$.prototype.setUserContext,$.prototype.setReleaseContext=$.prototype.setRelease,t.exports=$}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1,2:2,5:5,6:6,7:7,8:8}],4:[function(e,t,n){(function(n){var r=e(3),i="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},o=i.Raven,a=new r;a.noConflict=function(){return i.Raven=o,a},a.afterLoad(),t.exports=a,t.exports.Client=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{3:3}],5:[function(e,t,n){(function(n){var r=e(7),i="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{};function o(e){return void 0===e}function a(e){return"[object Object]"===Object.prototype.toString.call(e)}function s(e){return"[object String]"===Object.prototype.toString.call(e)}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}function u(){if(!("fetch"in i))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function c(e,t){var n,r;if(o(e.length))for(n in e)f(e,n)&&t.call(null,n,e[n]);else if(r=e.length)for(n=0;n<r;n++)t.call(null,n,e[n])}function d(e,t){if("number"!=typeof t)throw new Error("2nd argument to `truncate` function should be a number");return"string"!=typeof e||0===t||e.length<=t?e:e.substr(0,t)+"…"}function f(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function p(e){for(var t,n=[],r=0,i=e.length;r<i;r++)s(t=e[r])?n.push(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):t&&t.source&&n.push(t.source);return new RegExp(n.join("|"),"i")}function h(e){var t,n,r,i,o,a=[];if(!e||!e.tagName)return"";if(a.push(e.tagName.toLowerCase()),e.id&&a.push("#"+e.id),(t=e.className)&&s(t))for(n=t.split(/\s+/),o=0;o<n.length;o++)a.push("."+n[o]);var l=["type","name","title","alt"];for(o=0;o<l.length;o++)r=l[o],(i=e.getAttribute(r))&&a.push("["+r+'="'+i+'"]');return a.join("")}function m(e,t){return!!(!!e^!!t)}function g(e,t){if(m(e,t))return!1;var n,r,i=e.frames,o=t.frames;if(void 0===i||void 0===o)return!1;if(i.length!==o.length)return!1;for(var a=0;a<i.length;a++)if(n=i[a],r=o[a],n.filename!==r.filename||n.lineno!==r.lineno||n.colno!==r.colno||n.function!==r.function)return!1;return!0}function v(e){return function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(e))}function y(e){if("string"==typeof e){return d(e,40)}if("number"==typeof e||"boolean"==typeof e||void 0===e)return e;var t=Object.prototype.toString.call(e);return"[object Object]"===t?"[Object]":"[object Array]"===t?"[Array]":"[object Function]"===t?e.name?"[Function: "+e.name+"]":"[Function]":e}function _(e,t){return 0===t?y(e):a(e)?Object.keys(e).reduce((function(n,r){return n[r]=_(e[r],t-1),n}),{}):Array.isArray(e)?e.map((function(e){return _(e,t-1)})):y(e)}t.exports={isObject:function(e){return"object"==typeof e&&null!==e},isError:function(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}},isErrorEvent:function(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)},isDOMError:function(e){return"[object DOMError]"===Object.prototype.toString.call(e)},isDOMException:function(e){return"[object DOMException]"===Object.prototype.toString.call(e)},isUndefined:o,isFunction:function(e){return"function"==typeof e},isPlainObject:a,isString:s,isArray:l,isEmptyObject:function(e){if(!a(e))return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},supportsErrorEvent:function(){try{return new ErrorEvent(""),!0}catch(e){return!1}},supportsDOMError:function(){try{return new DOMError(""),!0}catch(e){return!1}},supportsDOMException:function(){try{return new DOMException(""),!0}catch(e){return!1}},supportsFetch:u,supportsReferrerPolicy:function(){if(!u())return!1;try{return new Request("pickleRick",{referrerPolicy:"origin"}),!0}catch(e){return!1}},supportsPromiseRejectionEvent:function(){return"function"==typeof PromiseRejectionEvent},wrappedCallback:function(e){return function(t,n){var r=e(t)||t;return n&&n(r)||r}},each:c,objectMerge:function(e,t){return t?(c(t,(function(t,n){e[t]=n})),e):e},truncate:d,objectFrozen:function(e){return!!Object.isFrozen&&Object.isFrozen(e)},hasKey:f,joinRegExp:p,urlencode:function(e){var t=[];return c(e,(function(e,n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})),t.join("&")},uuid4:function(){var e=i.crypto||i.msCrypto;if(!o(e)&&e.getRandomValues){var t=new Uint16Array(8);e.getRandomValues(t),t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;var n=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return n(t[0])+n(t[1])+n(t[2])+n(t[3])+n(t[4])+n(t[5])+n(t[6])+n(t[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},htmlTreeAsString:function(e){for(var t,n=[],r=0,i=0,o=" > ".length;e&&r++<5&&!("html"===(t=h(e))||r>1&&i+n.length*o+t.length>=80);)n.push(t),i+=t.length,e=e.parentNode;return n.reverse().join(" > ")},htmlElementAsString:h,isSameException:function(e,t){return!m(e,t)&&(e=e.values[0],t=t.values[0],e.type===t.type&&e.value===t.value&&(n=e.stacktrace,r=t.stacktrace,(!o(n)||!o(r))&&g(e.stacktrace,t.stacktrace)));var n,r},isSameStacktrace:g,parseUrl:function(e){if("string"!=typeof e)return{};var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/),n=t[6]||"",r=t[8]||"";return{protocol:t[2],host:t[4],path:t[5],relative:t[5]+n+r}},fill:function(e,t,n,r){if(null!=e){var i=e[t];e[t]=n(i),e[t].__raven__=!0,e[t].__orig__=i,r&&r.push([e,t,i])}},safeJoin:function(e,t){if(!l(e))return"";for(var n=[],r=0;r<e.length;r++)try{n.push(String(e[r]))}catch(e){n.push("[value cannot be serialized]")}return n.join(t)},serializeException:function e(t,n,i){if(!a(t))return t;i="number"!=typeof(n="number"!=typeof n?3:n)?51200:i;var o=_(t,n);return v(r(o))>i?e(t,n-1):o},serializeKeysForMessage:function(e,t){if("number"==typeof e||"string"==typeof e)return e.toString();if(!Array.isArray(e))return"";if(0===(e=e.filter((function(e){return"string"==typeof e}))).length)return"[object has no keys]";if(t="number"!=typeof t?40:t,e[0].length>=t)return e[0];for(var n=e.length;n>0;n--){var r=e.slice(0,n).join(", ");if(!(r.length>t))return n===e.length?r:r+"…"}return""},sanitize:function(e,t){if(!l(t)||l(t)&&0===t.length)return e;var n,i=p(t);try{n=JSON.parse(r(e))}catch(t){return e}return function e(t){return l(t)?t.map((function(t){return e(t)})):a(t)?Object.keys(t).reduce((function(n,r){return i.test(r)?n[r]="********":n[r]=e(t[r]),n}),{}):t}(n)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{7:7}],6:[function(e,t,n){(function(n){var r=e(5),i={collectWindowErrors:!0,debug:!1},o="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},a=[].slice,s="?",l=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function u(){return"undefined"==typeof document||null==document.location?"":document.location.href}i.report=function(){var e,t,n=[],c=null,d=null,f=null;function p(e,t){var r=null;if(!t||i.collectWindowErrors){for(var o in n)if(n.hasOwnProperty(o))try{n[o].apply(null,[e].concat(a.call(arguments,2)))}catch(e){r=e}if(r)throw r}}function h(t,n,o,a,c){var d=r.isErrorEvent(c)?c.error:c,h=r.isErrorEvent(t)?t.message:t;if(f)i.computeStackTrace.augmentStackTraceWithInitialElement(f,n,o,h),m();else if(d&&r.isError(d))p(i.computeStackTrace(d),!0);else{var g,v={url:n,line:o,column:a},y=void 0;if("[object String]"==={}.toString.call(h))(g=h.match(l))&&(y=g[1],h=g[2]);v.func=s,p({name:y,message:h,url:u(),stack:[v]},!0)}return!!e&&e.apply(this,arguments)}function m(){var e=f,t=c;c=null,f=null,d=null,p.apply(null,[e,!1].concat(t))}function g(e,t){var n=a.call(arguments,1);if(f){if(d===e)return;m()}var r=i.computeStackTrace(e);if(f=r,d=e,c=n,setTimeout((function(){d===e&&m()}),r.incomplete?2e3:0),!1!==t)throw e}return g.subscribe=function(r){!function(){if(t)return;e=o.onerror,o.onerror=h,t=!0}(),n.push(r)},g.unsubscribe=function(e){for(var t=n.length-1;t>=0;--t)n[t]===e&&n.splice(t,1)},g.uninstall=function(){!function(){if(!t)return;o.onerror=e,t=!1,e=void 0}(),n=[]},g}(),i.computeStackTrace=function(){function e(e){if(void 0!==e.stack&&e.stack){var t,n,r,i=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,o=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx(?:-web)|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,a=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,l=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,c=/\((\S*)(?::(\d+))(?::(\d+))\)/,d=e.stack.split("\n"),f=[];/^(.*) is undefined$/.exec(e.message);for(var p=0,h=d.length;p<h;++p){if(n=i.exec(d[p])){var m=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(t=c.exec(n[2]))&&(n[2]=t[1],n[3]=t[2],n[4]=t[3]),r={url:m?null:n[2],func:n[1]||s,args:m?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=o.exec(d[p]))r={url:n[2],func:n[1]||s,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=a.exec(d[p])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(t=l.exec(n[3]))?(n[3]=t[1],n[4]=t[2],n[5]=null):0!==p||n[5]||void 0===e.columnNumber||(f[0].column=e.columnNumber+1),r={url:n[3],func:n[1]||s,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}if(!r.func&&r.line&&(r.func=s),r.url&&"blob:"===r.url.substr(0,5)){var g=new XMLHttpRequest;if(g.open("GET",r.url,!1),g.send(null),200===g.status){var v=g.responseText||"",y=(v=v.slice(-300)).match(/\/\/# sourceMappingURL=(.*)$/);if(y){var _=y[1];"~"===_.charAt(0)&&(_=("undefined"==typeof document||null==document.location?"":document.location.origin?document.location.origin:document.location.protocol+"//"+document.location.hostname+(document.location.port?":"+document.location.port:""))+_.slice(1)),r.url=_.slice(0,-4)}}}f.push(r)}return f.length?{name:e.name,message:e.message,url:u(),stack:f}:null}}function t(e,t,n,r){var i={url:t,line:n};if(i.url&&i.line){if(e.incomplete=!1,i.func||(i.func=s),e.stack.length>0&&e.stack[0].url===i.url){if(e.stack[0].line===i.line)return!1;if(!e.stack[0].line&&e.stack[0].func===i.func)return e.stack[0].line=i.line,!1}return e.stack.unshift(i),e.partial=!0,!0}return e.incomplete=!0,!1}function n(e,o){for(var a,l,c=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,d=[],f={},p=!1,h=n.caller;h&&!p;h=h.caller)if(h!==r&&h!==i.report){if(l={url:null,func:s,line:null,column:null},h.name?l.func=h.name:(a=c.exec(h.toString()))&&(l.func=a[1]),void 0===l.func)try{l.func=a.input.substring(0,a.input.indexOf("{"))}catch(e){}f[""+h]?p=!0:f[""+h]=!0,d.push(l)}o&&d.splice(0,o);var m={name:e.name,message:e.message,url:u(),stack:d};return t(m,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),m}function r(t,r){var o=null;r=null==r?0:+r;try{if(o=e(t))return o}catch(e){if(i.debug)throw e}try{if(o=n(t,r+1))return o}catch(e){if(i.debug)throw e}return{name:t.name,message:t.message,url:u()}}return r.augmentStackTraceWithInitialElement=t,r.computeStackTraceFromStackProp=e,r}(),t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{5:5}],7:[function(e,t,n){function r(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}function i(e,t){var n=[],i=[];return null==t&&(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+i.slice(0,r(n,t)).join(".")+"]"}),function(o,a){if(n.length>0){var s=r(n,this);~s?n.splice(s+1):n.push(this),~s?i.splice(s,1/0,o):i.push(o),~r(n,a)&&(a=t.call(this,o,a))}else n.push(a);return null==e?a instanceof Error?function(e){var t={stack:e.stack,message:e.message,name:e.name};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(a):a:e.call(this,o,a)}}(t.exports=function(e,t,n,r){return JSON.stringify(e,i(t,r),n)}).getSerialize=i},{}],8:[function(e,t,n){function r(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,i,o,a){return r((s=r(r(t,e),r(i,a)))<<(l=o)|s>>>32-l,n);var s,l}function o(e,t,n,r,o,a,s){return i(t&n|~t&r,e,t,o,a,s)}function a(e,t,n,r,o,a,s){return i(t&r|n&~r,e,t,o,a,s)}function s(e,t,n,r,o,a,s){return i(t^n^r,e,t,o,a,s)}function l(e,t,n,r,o,a,s){return i(n^(t|~r),e,t,o,a,s)}function u(e,t){var n,i,u,c,d;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var f=1732584193,p=-271733879,h=-1732584194,m=271733878;for(n=0;n<e.length;n+=16)i=f,u=p,c=h,d=m,f=o(f,p,h,m,e[n],7,-680876936),m=o(m,f,p,h,e[n+1],12,-389564586),h=o(h,m,f,p,e[n+2],17,606105819),p=o(p,h,m,f,e[n+3],22,-1044525330),f=o(f,p,h,m,e[n+4],7,-176418897),m=o(m,f,p,h,e[n+5],12,1200080426),h=o(h,m,f,p,e[n+6],17,-1473231341),p=o(p,h,m,f,e[n+7],22,-45705983),f=o(f,p,h,m,e[n+8],7,1770035416),m=o(m,f,p,h,e[n+9],12,-1958414417),h=o(h,m,f,p,e[n+10],17,-42063),p=o(p,h,m,f,e[n+11],22,-1990404162),f=o(f,p,h,m,e[n+12],7,1804603682),m=o(m,f,p,h,e[n+13],12,-40341101),h=o(h,m,f,p,e[n+14],17,-1502002290),f=a(f,p=o(p,h,m,f,e[n+15],22,1236535329),h,m,e[n+1],5,-165796510),m=a(m,f,p,h,e[n+6],9,-1069501632),h=a(h,m,f,p,e[n+11],14,643717713),p=a(p,h,m,f,e[n],20,-373897302),f=a(f,p,h,m,e[n+5],5,-701558691),m=a(m,f,p,h,e[n+10],9,38016083),h=a(h,m,f,p,e[n+15],14,-660478335),p=a(p,h,m,f,e[n+4],20,-405537848),f=a(f,p,h,m,e[n+9],5,568446438),m=a(m,f,p,h,e[n+14],9,-1019803690),h=a(h,m,f,p,e[n+3],14,-187363961),p=a(p,h,m,f,e[n+8],20,1163531501),f=a(f,p,h,m,e[n+13],5,-1444681467),m=a(m,f,p,h,e[n+2],9,-51403784),h=a(h,m,f,p,e[n+7],14,1735328473),f=s(f,p=a(p,h,m,f,e[n+12],20,-1926607734),h,m,e[n+5],4,-378558),m=s(m,f,p,h,e[n+8],11,-2022574463),h=s(h,m,f,p,e[n+11],16,1839030562),p=s(p,h,m,f,e[n+14],23,-35309556),f=s(f,p,h,m,e[n+1],4,-1530992060),m=s(m,f,p,h,e[n+4],11,1272893353),h=s(h,m,f,p,e[n+7],16,-155497632),p=s(p,h,m,f,e[n+10],23,-1094730640),f=s(f,p,h,m,e[n+13],4,681279174),m=s(m,f,p,h,e[n],11,-358537222),h=s(h,m,f,p,e[n+3],16,-722521979),p=s(p,h,m,f,e[n+6],23,76029189),f=s(f,p,h,m,e[n+9],4,-640364487),m=s(m,f,p,h,e[n+12],11,-421815835),h=s(h,m,f,p,e[n+15],16,530742520),f=l(f,p=s(p,h,m,f,e[n+2],23,-995338651),h,m,e[n],6,-198630844),m=l(m,f,p,h,e[n+7],10,1126891415),h=l(h,m,f,p,e[n+14],15,-1416354905),p=l(p,h,m,f,e[n+5],21,-57434055),f=l(f,p,h,m,e[n+12],6,1700485571),m=l(m,f,p,h,e[n+3],10,-1894986606),h=l(h,m,f,p,e[n+10],15,-1051523),p=l(p,h,m,f,e[n+1],21,-2054922799),f=l(f,p,h,m,e[n+8],6,1873313359),m=l(m,f,p,h,e[n+15],10,-30611744),h=l(h,m,f,p,e[n+6],15,-1560198380),p=l(p,h,m,f,e[n+13],21,1309151649),f=l(f,p,h,m,e[n+4],6,-145523070),m=l(m,f,p,h,e[n+11],10,-1120210379),h=l(h,m,f,p,e[n+2],15,718787259),p=l(p,h,m,f,e[n+9],21,-343485551),f=r(f,i),p=r(p,u),h=r(h,c),m=r(m,d);return[f,p,h,m]}function c(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function d(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function f(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i}function p(e){return unescape(encodeURIComponent(e))}function h(e){return function(e){return c(u(d(e),8*e.length))}(p(e))}function m(e,t){return function(e,t){var n,r,i=d(e),o=[],a=[];for(o[15]=a[15]=void 0,i.length>16&&(i=u(i,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],a[n]=1549556828^i[n];return r=u(o.concat(d(t)),512+8*t.length),c(u(a.concat(r),640))}(p(e),p(t))}t.exports=function(e,t,n){return t?n?m(t,e):f(m(t,e)):n?h(e):f(h(e))}},{}]},{},[4])(4)}));var w=Raven;var x=Object.hasOwnProperty,E=Object.setPrototypeOf,S=Object.isFrozen,k=Object.getPrototypeOf,O=Object.getOwnPropertyDescriptor,A=Object.freeze,T=Object.seal,C=Object.create,R="undefined"!=typeof Reflect&&Reflect,D=R.apply,L=R.construct;D||(D=function(e,t,n){return e.apply(t,n)}),A||(A=function(e){return e}),T||(T=function(e){return e}),L||(L=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(
/*! @license DOMPurify | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.2.2/LICENSE */
function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var F,j=W(Array.prototype.forEach),N=W(Array.prototype.pop),M=W(Array.prototype.push),H=W(String.prototype.toLowerCase),I=W(String.prototype.match),U=W(String.prototype.replace),q=W(String.prototype.indexOf),P=W(String.prototype.trim),B=W(RegExp.prototype.test),z=(F=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return L(F,t)});function W(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return D(e,t,r)}}function $(e,t){E&&E(e,null);for(var n=t.length;n--;){var r=t[n];if("string"==typeof r){var i=H(r);i!==r&&(S(t)||(t[n]=i),r=i)}e[r]=!0}return e}function G(e){var t=C(null),n=void 0;for(n in e)D(x,e,[n])&&(t[n]=e[n]);return t}function J(e,t){for(;null!==e;){var n=O(e,t);if(n){if(n.get)return W(n.get);if("function"==typeof n.value)return W(n.value)}e=k(e)}return function(e){return console.warn("fallback value for",e),null}}var K=A(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),X=A(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),V=A(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Y=A(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Z=A(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Q=A(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ee=A(["#text"]),te=A(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ne=A(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),re=A(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ie=A(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),oe=T(/\{\{[\s\S]*|[\s\S]*\}\}/gm),ae=T(/<%[\s\S]*|[\s\S]*%>/gm),se=T(/^data-[\-\w.\u00B7-\uFFFF]/),le=T(/^aria-[\-\w]+$/),ue=T(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ce=T(/^(?:\w+script|data):/i),de=T(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function pe(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var he=function(){return"undefined"==typeof window?null:window},me=function(e,t){if("object"!==(void 0===e?"undefined":fe(e))||"function"!=typeof e.createPolicy)return null;var n=null,r="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(r)&&(n=t.currentScript.getAttribute(r));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};var ge,ve,ye,_e,be,we,xe,Ee,Se,ke,Oe,Ae=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he(),n=function(t){return e(t)};if(n.version="2.2.8",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var r=t.document,i=t.document,o=t.DocumentFragment,a=t.HTMLTemplateElement,s=t.Node,l=t.Element,u=t.NodeFilter,c=t.NamedNodeMap,d=void 0===c?t.NamedNodeMap||t.MozNamedAttrMap:c,f=t.Text,p=t.Comment,h=t.DOMParser,m=t.trustedTypes,g=l.prototype,v=J(g,"cloneNode"),y=J(g,"nextSibling"),_=J(g,"childNodes"),b=J(g,"parentNode");if("function"==typeof a){var w=i.createElement("template");w.content&&w.content.ownerDocument&&(i=w.content.ownerDocument)}var x=me(m,r),E=x&&Me?x.createHTML(""):"",S=i,k=S.implementation,O=S.createNodeIterator,T=S.createDocumentFragment,C=r.importNode,R={};try{R=G(i).documentMode?i.documentMode:{}}catch(e){}var D={};n.isSupported="function"==typeof b&&k&&void 0!==k.createHTMLDocument&&9!==R;var L=oe,F=ae,W=se,ge=le,ve=ce,ye=de,_e=ue,be=null,we=$({},[].concat(pe(K),pe(X),pe(V),pe(Z),pe(ee))),xe=null,Ee=$({},[].concat(pe(te),pe(ne),pe(re),pe(ie))),Se=null,ke=null,Oe=!0,Ae=!0,Te=!1,Ce=!1,Re=!1,De=!1,Le=!1,Fe=!1,je=!1,Ne=!0,Me=!1,He=!0,Ie=!0,Ue=!1,qe={},Pe=$({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Be=null,ze=$({},["audio","video","img","source","image","track"]),We=null,$e=$({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),Ge="http://www.w3.org/1998/Math/MathML",Je="http://www.w3.org/2000/svg",Ke="http://www.w3.org/1999/xhtml",Xe=Ke,Ve=null,Ye=i.createElement("form"),Ze=function(e){Ve&&Ve===e||(e&&"object"===(void 0===e?"undefined":fe(e))||(e={}),e=G(e),be="ALLOWED_TAGS"in e?$({},e.ALLOWED_TAGS):we,xe="ALLOWED_ATTR"in e?$({},e.ALLOWED_ATTR):Ee,We="ADD_URI_SAFE_ATTR"in e?$(G($e),e.ADD_URI_SAFE_ATTR):$e,Be="ADD_DATA_URI_TAGS"in e?$(G(ze),e.ADD_DATA_URI_TAGS):ze,Se="FORBID_TAGS"in e?$({},e.FORBID_TAGS):{},ke="FORBID_ATTR"in e?$({},e.FORBID_ATTR):{},qe="USE_PROFILES"in e&&e.USE_PROFILES,Oe=!1!==e.ALLOW_ARIA_ATTR,Ae=!1!==e.ALLOW_DATA_ATTR,Te=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Ce=e.SAFE_FOR_TEMPLATES||!1,Re=e.WHOLE_DOCUMENT||!1,Fe=e.RETURN_DOM||!1,je=e.RETURN_DOM_FRAGMENT||!1,Ne=!1!==e.RETURN_DOM_IMPORT,Me=e.RETURN_TRUSTED_TYPE||!1,Le=e.FORCE_BODY||!1,He=!1!==e.SANITIZE_DOM,Ie=!1!==e.KEEP_CONTENT,Ue=e.IN_PLACE||!1,_e=e.ALLOWED_URI_REGEXP||_e,Xe=e.NAMESPACE||Xe,Ce&&(Ae=!1),je&&(Fe=!0),qe&&(be=$({},[].concat(pe(ee))),xe=[],!0===qe.html&&($(be,K),$(xe,te)),!0===qe.svg&&($(be,X),$(xe,ne),$(xe,ie)),!0===qe.svgFilters&&($(be,V),$(xe,ne),$(xe,ie)),!0===qe.mathMl&&($(be,Z),$(xe,re),$(xe,ie))),e.ADD_TAGS&&(be===we&&(be=G(be)),$(be,e.ADD_TAGS)),e.ADD_ATTR&&(xe===Ee&&(xe=G(xe)),$(xe,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&$(We,e.ADD_URI_SAFE_ATTR),Ie&&(be["#text"]=!0),Re&&$(be,["html","head","body"]),be.table&&($(be,["tbody"]),delete Se.tbody),A&&A(e),Ve=e)},Qe=$({},["mi","mo","mn","ms","mtext"]),et=$({},["foreignobject","desc","title","annotation-xml"]),tt=$({},X);$(tt,V),$(tt,Y);var nt=$({},Z);$(nt,Q);var rt=function(e){var t=b(e);t&&t.tagName||(t={namespaceURI:Ke,tagName:"template"});var n=H(e.tagName),r=H(t.tagName);if(e.namespaceURI===Je)return t.namespaceURI===Ke?"svg"===n:t.namespaceURI===Ge?"svg"===n&&("annotation-xml"===r||Qe[r]):Boolean(tt[n]);if(e.namespaceURI===Ge)return t.namespaceURI===Ke?"math"===n:t.namespaceURI===Je?"math"===n&&et[r]:Boolean(nt[n]);if(e.namespaceURI===Ke){if(t.namespaceURI===Je&&!et[r])return!1;if(t.namespaceURI===Ge&&!Qe[r])return!1;var i=$({},["title","style","font","a","script"]);return!nt[n]&&(i[n]||!tt[n])}return!1},it=function(e){M(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=E}catch(t){e.remove()}}},ot=function(e,t){try{M(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){M(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!xe[e])if(Fe||je)try{it(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},at=function(e){var t=void 0,n=void 0;if(Le)e="<remove></remove>"+e;else{var r=I(e,/^[\r\n\t ]+/);n=r&&r[0]}var o=x?x.createHTML(e):e;if(Xe===Ke)try{t=(new h).parseFromString(o,"text/html")}catch(e){}t&&t.documentElement||((t=k.createDocument(Xe,"template",null)).documentElement.innerHTML=o);var a=t.body||t.documentElement;return e&&n&&a.insertBefore(i.createTextNode(n),a.childNodes[0]||null),Re?t.documentElement:a},st=function(e){return O.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,(function(){return u.FILTER_ACCEPT}),!1)},lt=function(e){return!(e instanceof f||e instanceof p)&&!("string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof d&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore)},ut=function(e){return"object"===(void 0===s?"undefined":fe(s))?e instanceof s:e&&"object"===(void 0===e?"undefined":fe(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},ct=function(e,t,r){D[e]&&j(D[e],(function(e){e.call(n,t,r,Ve)}))},dt=function(e){var t=void 0;if(ct("beforeSanitizeElements",e,null),lt(e))return it(e),!0;if(I(e.nodeName,/[\u0080-\uFFFF]/))return it(e),!0;var r=H(e.nodeName);if(ct("uponSanitizeElement",e,{tagName:r,allowedTags:be}),!ut(e.firstElementChild)&&(!ut(e.content)||!ut(e.content.firstElementChild))&&B(/<[/\w]/g,e.innerHTML)&&B(/<[/\w]/g,e.textContent))return it(e),!0;if(!be[r]||Se[r]){if(Ie&&!Pe[r]){var i=b(e)||e.parentNode,o=_(e)||e.childNodes;if(o&&i)for(var a=o.length-1;a>=0;--a)i.insertBefore(v(o[a],!0),y(e))}return it(e),!0}return e instanceof l&&!rt(e)?(it(e),!0):"noscript"!==r&&"noembed"!==r||!B(/<\/no(script|embed)/i,e.innerHTML)?(Ce&&3===e.nodeType&&(t=e.textContent,t=U(t,L," "),t=U(t,F," "),e.textContent!==t&&(M(n.removed,{element:e.cloneNode()}),e.textContent=t)),ct("afterSanitizeElements",e,null),!1):(it(e),!0)},ft=function(e,t,n){if(He&&("id"===t||"name"===t)&&(n in i||n in Ye))return!1;if(Ae&&B(W,t));else if(Oe&&B(ge,t));else{if(!xe[t]||ke[t])return!1;if(We[t]);else if(B(_e,U(n,ye,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==q(n,"data:")||!Be[e]){if(Te&&!B(ve,U(n,ye,"")));else if(n)return!1}else;}return!0},pt=function(e){var t=void 0,r=void 0,i=void 0,o=void 0;ct("beforeSanitizeAttributes",e,null);var a=e.attributes;if(a){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:xe};for(o=a.length;o--;){var l=t=a[o],u=l.name,c=l.namespaceURI;if(r=P(t.value),i=H(u),s.attrName=i,s.attrValue=r,s.keepAttr=!0,s.forceKeepAttr=void 0,ct("uponSanitizeAttribute",e,s),r=s.attrValue,!s.forceKeepAttr&&(ot(u,e),s.keepAttr))if(B(/\/>/i,r))ot(u,e);else{Ce&&(r=U(r,L," "),r=U(r,F," "));var d=e.nodeName.toLowerCase();if(ft(d,i,r))try{c?e.setAttributeNS(c,u,r):e.setAttribute(u,r),N(n.removed)}catch(e){}}}ct("afterSanitizeAttributes",e,null)}},ht=function e(t){var n=void 0,r=st(t);for(ct("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)ct("uponSanitizeShadowNode",n,null),dt(n)||(n.content instanceof o&&e(n.content),pt(n));ct("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e,i){var a=void 0,l=void 0,u=void 0,c=void 0,d=void 0;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!ut(e)){if("function"!=typeof e.toString)throw z("toString is not a function");if("string"!=typeof(e=e.toString()))throw z("dirty is not a string, aborting")}if(!n.isSupported){if("object"===fe(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(ut(e))return t.toStaticHTML(e.outerHTML)}return e}if(De||Ze(i),n.removed=[],"string"==typeof e&&(Ue=!1),Ue);else if(e instanceof s)1===(l=(a=at("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?a=l:a.appendChild(l);else{if(!Fe&&!Ce&&!Re&&-1===e.indexOf("<"))return x&&Me?x.createHTML(e):e;if(!(a=at(e)))return Fe?null:E}a&&Le&&it(a.firstChild);for(var f=st(Ue?e:a);u=f.nextNode();)3===u.nodeType&&u===c||dt(u)||(u.content instanceof o&&ht(u.content),pt(u),c=u);if(c=null,Ue)return e;if(Fe){if(je)for(d=T.call(a.ownerDocument);a.firstChild;)d.appendChild(a.firstChild);else d=a;return Ne&&(d=C.call(r,d,!0)),d}var p=Re?a.outerHTML:a.innerHTML;return Ce&&(p=U(p,L," "),p=U(p,F," ")),x&&Me?x.createHTML(p):p},n.setConfig=function(e){Ze(e),De=!0},n.clearConfig=function(){Ve=null,De=!1},n.isValidAttribute=function(e,t,n){Ve||Ze({});var r=H(e),i=H(t);return ft(r,i,n)},n.addHook=function(e,t){"function"==typeof t&&(D[e]=D[e]||[],M(D[e],t))},n.removeHook=function(e){D[e]&&N(D[e])},n.removeHooks=function(e){D[e]&&(D[e]=[])},n.removeAllHooks=function(){D={}},n}();function Te(e){if(!e)return!1;var t=e.tagName;if("TEXTAREA"===t||"INPUT"===t)return!0;for(;e.parentNode;){if(e.isContentEditable)return!0;e=e.parentNode}return!1}function Ce(e){Te(e.target)||32!=e.keyCode&&38!=e.keyCode&&40!=e.keyCode&&33!=e.keyCode&&34!=e.keyCode||e.preventDefault()}function Re(e){Te(e.target)||(39!=e.keyCode&&40!=e.keyCode&&32!=e.keyCode&&34!=e.keyCode||ve(),37!=e.keyCode&&38!=e.keyCode&&33!=e.keyCode||ge())}function De(){if(null==ye){var e=function(){var e=window.location;"about:srcdoc"==e.href&&(e=window.parent.location);var t={};return function(e,n,r){for(;r=n.exec(e);)t[decodeURIComponent(r[1])]=decodeURIComponent(r[2])}(e.search.substring(1).replace(/\+/g,"%20"),/([^&=]+)=?([^&]*)/g),t}();ye="referrer"in e?/^https:\/\/medium.com\//.test(e.referrer):!("auto"in e)}return ye}function Le(e){var t=e||window.innerWidth;return t>999?650:t>599?575:400}function Fe(e,t){if(window.top!==window.self){var n=window;if("srcdoc"==n.location.pathname&&(n=n.parent),_e)return e=parseInt(e,10),void n.parent.postMessage({sentinel:"amp",type:"embed-size",height:e},"*");var r={sender:"Flourish",context:"iframe.resize",method:"resize",height:e,src:n.location.toString()};if(t)for(var i in t)r[i]=t[i];n.parent.postMessage(JSON.stringify(r),"*")}}function je(){return(-1!==navigator.userAgent.indexOf("Safari")||-1!==navigator.userAgent.indexOf("iPhone"))&&-1==navigator.userAgent.indexOf("Chrome")}function Ne(e){window.addEventListener("message",(function(t){if(null!=t.source&&(t.origin===document.location.origin||t.origin.match(/\/\/localhost:\d+$|\/\/flourish-api\.com$|\.flourish\.(?:local(:\d+)?|net|rocks|studio)$|\.uri\.sh$/))){var n;try{n=JSON.parse(t.data)}catch(e){return void console.warn("Unexpected non-JSON message: "+JSON.stringify(t.data))}if("Flourish"===n.sender){for(var r=document.querySelectorAll("iframe"),i=0;i<r.length;i++)if(r[i].contentWindow==t.source||r[i].contentWindow==t.source.parent)return void e(n,r[i]);console.warn("could not find frame",n)}}})),je()&&(window.addEventListener("resize",Me),Me())}function Me(){for(var e=document.querySelectorAll(".flourish-embed"),t=0;t<e.length;t++){var n=e[t];if(!n.getAttribute("data-width")){var r=n.querySelector("iframe"),i=window.getComputedStyle(n),o=n.offsetWidth-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight);r.style.width=o+"px"}}}function He(e,t,n,r){var i;n&&"number"==typeof n?(i=n,n+="px"):n&&n.match(/^[ \t\r\n\f]*([+-]?\d+|\d*\.\d+(?:[eE][+-]?\d+)?)(?:\\?[Pp]|\\0{0,4}[57]0(?:\r\n|[ \t\r\n\f])?)(?:\\?[Xx]|\\0{0,4}[57]8(?:\r\n|[ \t\r\n\f])?)[ \t\r\n\f]*$/)&&(i=parseFloat(n)),r&&"number"==typeof r&&(r+="px");var o=document.createElement("iframe");return o.setAttribute("scrolling","no"),o.setAttribute("frameborder","0"),o.setAttribute("title","Interactive or visual content"),o.setAttribute("sandbox","allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation"),t.appendChild(o),n?o.style.width=n:je()?o.style.width=t.offsetWidth+"px":o.style.width="100%",!!r||(e.match(/\?/)?e+="&auto=1":e+="?auto=1",r=Le(i||o.offsetWidth)+"px"),r&&("%"===r.charAt(r.length-1)&&(r=parseFloat(r)/100*t.parentNode.offsetHeight+"px"),o.style.height=r),o.setAttribute("src",e),o}function Ie(){return _e="#amp=1"==window.location.hash,{createEmbedIframe:He,isFixedHeight:De,getHeightForBreakpoint:Le,startEventListeners:Ne,notifyParentWindow:Fe,isSafari:je}}function Ue(e){var t={};for(var n in e){for(var r=t,i=n.indexOf("."),o=0;i>=0;i=n.indexOf(".",o=i+1)){var a=n.substring(o,i);a in r||(r[a]={}),r=r[a]}r[n.substring(o)]=e[n]}return t}function qe(e){if(null==e)return e;var t,n={};for(var r in e)Array.isArray(e[r])?n[r]=e[r].slice():(t=e[r],Array.isArray(t)||"object"!=typeof t||null==t?n[r]=e[r]:n[r]=qe(e[r]));return n}var Pe,Be=null;function ze(){return"MessageChannel"in window}var We=null;function $e(){We&&be.removeEventListener("load",We),We=null}function Ge(e){$e(),be.addEventListener("load",e),We=e}var Je,Ke,Xe,Ve=null;function Ye(){Ve&&(cancelAnimationFrame(Ve),Ve=null)}function Ze(e,t){Ye();var n=null,r=function(i){null==n&&(n=i);var o=i-n,a=Math.min(1,Math.max(0,o/e));be.style.opacity=1-a,1==a?(Ve=null,t()):Ve=requestAnimationFrame(r)};Ve=requestAnimationFrame(r)}function Qe(e,t,n){return _t(!1),Oe=e?e.visualisation?e.visualisation:e.current_slide.visualisation:null,Be=null,Oe&&Oe.template_id?(Ge(function(e,t,n){var r=e.visualisation?e.visualisation.template_id:e.current_slide.visualisation.template_id,i=e.current_slide?e.current_slide.id:null;return function(){!Oe||Oe.template_id!=r||e.current_slide&&e.current_slide.id!==i||($e(),st((function(o,a){o?console.error("Failed to get default state"):!Oe||Oe.template_id!=r||e.current_slide&&e.current_slide.id!==i||lt((function(o,s){if(o)console.error("Failed to call hasData");else if(Oe&&Oe.template_id==r&&(!e.current_slide||e.current_slide.id===i)){var l=!1;e.visualisation&&(l=e.data_bindings.requiredBindingsAreUnset()),s?Oe.refreshDataBindings((function(o){o?console.error("Failed to refresh data bindings"):!Oe||Oe.template_id!=r||e.current_slide&&e.current_slide.id!==i||Oe.prepareData((function(o,s){o?console.error("Failed to prepare data for template"):!Oe||Oe.template_id!=r||e.current_slide&&e.current_slide.id!==i||vt({data:s,state:t,draw:!l},(function(e,t){Be=a,n(e,t)}))}))})):vt({state:t,draw:!l},(function(e,t){Be=a,n(e,t)}))}}))})))}}(e,t,n)),be.src="/template/"+Oe.template_id+"/embed/?auto=1&environment="+we+"&is_read_only="+(e.is_read_only?"1":"0"),be):($e(),be.src="about:blank",be)}function et(e,t,n,r){var i="about:blank"===be.src;if(_t(!1),t){var o=e[t]||"/template/"+t+"/embed";o+="?environment="+we,r&&(o+="&auto=1"),i?a():Ze(250,a)}else Ze(250,(function(){$e(),be.src="about:blank"}));function a(){Ge(function(e){return function(){st((function(t,n){t?console.error("Failed to get default state"):(Be=n,e())}))}}((function(){n(),i||function(e){Ye();var t=null,n=function(r){null==t&&(t=r);var i=r-t,o=Math.min(1,Math.max(0,i/e));be.style.opacity=o,Ve=1==o?null:requestAnimationFrame(n)};Ve=requestAnimationFrame(n)}(250)}))),be.src=o}}function tt(e,t){var n=e.template_id;e.refreshDataBindings((function(r){r?console.error("Failed to fetch data bindings"):e.prepareData((function(e,r){if(Oe&&Oe.template_id==n)return e?(console.error("Failed to prepare data for template"),void t(e)):void t(void 0,r)}))}))}function nt(e,t){tt(e,(function(e,n){if(e)return t(e);vt({data:n,update:!0},t)}))}function rt(e,t){tt(e,(function(e,n){if(e)return t(e);vt({data:n,update:!1},t)}))}function it(e,t,n){tt(e,(function(e,r){if(e)return n(e);vt({data:r,state:t,overwrite_state:!0,update:!0},n)}))}function ot(e,t,n){if(ze()){var r=new MessageChannel;r.port1.onmessage=function(e){var t=e.data;if("string"==typeof t){if(!n)return;return n(void 0,JSON.parse(t))}if("object"==typeof t){if("result"in t){if(!n)return;return n(void 0,t.result)}if("error"in t){if(!n)return;return n(t.error)}console.error("Unrecognised response to message",t)}else console.error("Unrecognised response to message",t)},be.contentWindow.postMessage({sender:"Flourish",method:e,argument:t},"*",[r.port2])}}function at(e,t){ot("setState",Ue(e),t)}function st(e,t){"function"!=typeof e?ot("getState",e,t):ot("getState",void 0,e)}function lt(e){ot("hasData",void 0,e)}function ut(e,t){ot("setData",e,t)}function ct(e){ot("getData",void 0,e)}function dt(e){ot("draw",void 0,e),_t(!0)}function ft(e){Se&&Se.clear(),yt()&&ot("update",void 0,e)}function pt(e,t){ot("snapshot",e,t)}function ht(){return qe(Be)}function mt(e,t){ot("setFixedHeight",e,t)}function gt(e){if(be.parentNode.offsetWidth){if(void 0!==e)Pe=null!=e;else if(Pe)return;var t=e||Ee&&Ee.responsive_menu&&Ee.responsive_menu.getHeightSetting()||xe.getHeightForBreakpoint(be.offsetWidth);"number"==typeof t&&(t+="px"),be.style.height=t}}function vt(e,t){yt()?delete e.draw:e.draw&&_t(!0),e.state&&(e.state=Ue(e.state)),Se&&Se.clear(),ot("sync",e,(function(n,r){null!=n||"success"!==r?(e.draw&&_t(!1),function n(r){r?t&&t(r):function(e,t){return e.data?(ut(e.data,t),delete e.data,!1):e.state?(at(e.state,t),delete e.state,!1):e.draw?(dt(t),delete e.draw,!1):!e.update||(ft(t),delete e.update,!1)}(e,n)&&t&&t(void 0)}(n)):t&&t(void 0)}))}function yt(){return ke}function _t(e){ke=e}function bt(e,t,n,r,i){return be=document.querySelector(e),we=t,Ee=n,Se=r,i||(i={}),xe=Ie(),be.style.height=xe.getHeightForBreakpoint(be.offsetWidth)+"px",xe.startEventListeners((function(e){"resize"==e.method?gt(e.height):"warn"==e.method?(Se&&Se.warn(e),console.warn("Warning from template:",e.message,e.explanation)):e.method in i&&i[e.method](e)})),ze()||function(e){if(e){var t=document.createElement("div");t.className="unsupported-notice",t.innerHTML="<h3>Please update your browser</h3><p>This page only works with newer versions of your browser.</p>",e.appendChild(t)}}(be.parentNode),{loadVisualisation:Qe,loadTemplate:et,updateData:nt,updateDataAndState:it,updateDataNotPreview:rt,setState:at,getState:st,getDefaultState:ht,hasData:lt,setData:ut,getData:ct,draw:dt,update:ft,snapshot:pt,setFixedHeight:mt,resize:gt,sync:vt,getDrawCalled:yt,setDrawCalled:_t}}function wt(e,t){for(var n in t)"object"!=typeof e[n]||null==e[n]||Array.isArray(e[n])||"object"!=typeof t[n]||null==t[n]||Array.isArray(t[n])?e[n]=t[n]:wt(e[n],t[n])}function xt(e,t,n,r,a,l){var u=this;if(u.story=e,u.visualisations=t,u.data=n,u.template_paths=r||{},u.auto_resize=!Ke.isFixedHeight(),l?u.analytics=window.ga=function(e){if(!e||"function"!=typeof e){var t=Array.prototype.slice.call(arguments,1);if("send"==e)for(var n=0;n<t.length;n++)"object"==typeof t[n]&&"hitCallback"in t[n]&&t[n].hitCallback()}}:(u.analytics=function(e,t){if(!window.location.hostname.match(/\.flourish\.studio$/))return window.ga=function(e){if(!e||"function"!=typeof e){var t=Array.prototype.slice.call(arguments,0);if(t.unshift("Analytics:"),console.log.apply(console,t),"send"==e)for(var n=1;n<t.length;n++)"object"==typeof t[n]&&"hitCallback"in t[n]&&t[n].hitCallback()}};var n,r,o,a,s,l;n=window,r=document,o="script",a="ga",n.GoogleAnalyticsObject=a,n.ga=n.ga||function(){var e=Array.prototype.slice.call(arguments);(n.ga.q=n.ga.q||[]).push(i(e))},n.ga.l=1*new Date,s=r.createElement(o),l=r.getElementsByTagName(o)[0],s.async=1,s.src="https://www.google-analytics.com/analytics.js",l.parentNode.insertBefore(s,l);var u={cookieDomain:"flourish.studio"};void 0===t?(u.storage="none",u.storeGac=!1):u.userId=t.id,ga("create","UA-44635456-19","auto",u),ga("set","transport","beacon"),void 0!==t&&(ga("set","dimension1",t.id),t.company_type?ga("set","dimension3","other"==t.company_type?"corporate":t.company_type):ga("set","dimension3",t.has_active_subscription?"personal":"free"));var c=new Date;return ga("set","dimension2",c.toISOString()),ga("send","pageview",e),function(){arguments.length>=4&&"event"===arguments[1]&&(window._mfq=window._mfq||[],window._mfq.push(["setVariable",arguments[2],arguments[3]])),window.ga.apply(window.ga,i(Array.prototype.slice.call(arguments)))}}("/story/"+e.id,a),u.analytics("send","event","story","play",e.id)),e.slides.length>0){for(var c=0;c<e.slides.length;c++){var d=e.slides[c];d.visualisation_id&&(d.visualisation=t[d.visualisation_id])}window.location.hash&&"#amp=1"!=window.location.hash||(window.location.hash="#slide-0"),u.loadSlideFromHash()}function f(){u.previous()}function g(){u.next()}!function(e,t){ge=e,ve=t}(f,g),window.addEventListener("keydown",Ce),window.addEventListener("keyup",Re),u.auto_resize?function(){var e=document.querySelector("iframe"),t=e.offsetHeight,n=document.querySelector(".story-furniture");Ke.startEventListeners((function(r){"resize"===r.method&&r.height!==t&&("number"!=typeof(t=r.height)&&(t=parseInt(t,10)),e.style.height=t+"px",kt(e.offsetHeight+(n?n.offsetHeight:0)))}))}():u.updateHeight(),u.auto_resize||window.addEventListener("resize",(function(){u.updateHeight()}));var v=!0;o=u,s=function(e){return window.location.hash="#slide-"+e,!0},y(),_(),Xe={update:y,play:h,pause:m,playPause:p,updateTimecodes:_,jumpToSlide:b};var w=document.querySelector(".first");w&&w.addEventListener("click",(function(){u.first()}));var x=document.querySelector(".previous");x&&x.addEventListener("click",f);var E=document.querySelectorAll(".play-pause");for(c=0;c<E.length;c++)E[c].addEventListener("click",(function(){v&&(v=!1,Xe.jumpToSlide(u.current_slide.index)),Xe.playPause()}));var S=document.querySelector(".next");S&&S.addEventListener("click",g);var k=document.querySelector(".last");k&&k.addEventListener("click",(function(){u.last()}))}xt.prototype.noSlidesBefore=function(){return!this.current_slide||this.current_slide.index<1},xt.prototype.noSlidesAfter=function(){return!this.current_slide||this.current_slide.index==this.story.slides.length-1},xt.prototype.previous=function(){this.noSlidesBefore()||(this.analytics("send","event","story","previous",this.current_slide.index),window.location.hash="#slide-"+(this.current_slide.index-1))},xt.prototype.next=function(){this.noSlidesAfter()||(this.analytics("send","event","story","next",this.current_slide.index),window.location.hash="#slide-"+(this.current_slide.index+1))},xt.prototype.first=function(){this.noSlidesBefore()||(this.analytics("send","event","story","first",this.current_slide.index),window.location.hash="#slide-0")},xt.prototype.last=function(){this.noSlidesAfter()||(this.analytics("send","event","story","last",this.current_slide.index),window.location.hash="#slide-"+(this.story.slides.length-1))},xt.prototype.populateStateAndData=function(e,t){var n=this.current_slide,r=n.visualisation,i={};wt(i,Je.getDefaultState()),wt(i,Ue(r.settingsForCurrentTemplate())),wt(i,n.state);var o={state:i,overwrite_state:!0};t&&(o.data=this.data[r.id]),o[e]=!0,Je.sync(o)},xt.prototype.loadSlide=function(e){var t=this;e<0&&(e=0),e>=t.story.slides.length&&(e=t.story.slides.length-1);var n=t.story.slides[e],r=n.visualisation,i=r&&r.template_id,o=t.current_slide,a=t.loaded_visualisation,s=t.loaded_template_id;function l(e,n){return function(){t.loaded_visualisation=r,t.loaded_template_id=i,function(e){null==e&&(e="");var t=document.querySelector(".story-furniture .caption");t&&(t.innerHTML=Ae.sanitize(e))}(t.current_slide&&t.current_slide.caption_text),i&&(t.populateStateAndData(e,n),t.updateHeight())}}t.current_slide=n,n!==o&&(t.updateControls(),t.updateSlideCount(),this.analytics("send","event","story","load_slide",e),r===a?l("update",!1)():i===s?l("update",!0)():Je.loadTemplate(t.template_paths,i,l("draw",!0),t.auto_resize))};var Et=null;function St(){Et||(Et={furniture:document.querySelector(".story-furniture"),progress:document.querySelector(".progress span, .progress-indicator .progress"),previous:document.querySelector(".previous"),next:document.querySelector(".next"),first:document.querySelector(".first"),last:document.querySelector(".last"),count_current:document.querySelector(".count .current, .count-current"),count_total:document.querySelector(".count .total, .count-total")})}function kt(e){e&&Ke.notifyParentWindow(e,{player:!0})}return xt.prototype.updateControls=function(){var e,t=this,n=t.current_slide;e=t.story.slides.length<2?0:n.index/(t.story.slides.length-1),St(),Et.progress&&(Et.progress.style.width=100*e+"%"),document.querySelector("nav")?(t.noSlidesBefore()?(Et.previous.setAttribute("disabled",""),Et.first.setAttribute("disabled","")):(Et.previous.removeAttribute("disabled"),Et.first.removeAttribute("disabled")),t.noSlidesAfter()?(Et.next.setAttribute("disabled",""),Et.last.setAttribute("disabled","")):(Et.next.removeAttribute("disabled"),Et.last.removeAttribute("disabled"))):(t.noSlidesBefore()?(Et.previous&&Et.previous.classList.add("disabled"),Et.first&&Et.first.classList.add("disabled")):(Et.previous&&Et.previous.classList.remove("disabled"),Et.first&&Et.first.classList.remove("disabled")),t.noSlidesAfter()?(Et.next&&Et.next.classList.add("disabled"),Et.last&&Et.last.classList.add("disabled")):(Et.next&&Et.next.classList.remove("disabled"),Et.last&&Et.last.classList.remove("disabled"))),Et.furniture&&(null!=n&&n.caption_text?Et.furniture.classList.add("has-caption"):Et.furniture.classList.remove("has-caption"))},xt.prototype.updateSlideCount=function(){St(),Et.count_current&&(Et.count_current.innerHTML=this.current_slide.index+1),Et.count_total&&(Et.count_total.innerHTML=this.story.slides.length)},xt.prototype.loadSlideFromHash=function(){var e=window.location.hash;if(e&&e.match(/^#slide-/)){var t=parseInt(e.substr("#slide-".length));this.loadSlide(t),Xe&&Xe.jumpToSlide(t)}},xt.prototype.updateHeight=function(){var e=document.querySelector("iframe"),t=document.querySelector(".story-furniture");if(this.auto_resize){kt(e.offsetHeight+(t?t.offsetHeight:0))}else{var n=document.body.offsetHeight-(t?t.offsetHeight:0);n!==e.offsetHeight&&(e.style.height=n+"px")}},e.Slide=function(e,n,r){this.story=e,t(this,n,void 0,r)},e.Story=function(e,n,r,i,o){t(this,e,n,r),this.slides=i,this.slides_by_id={};for(var a=0;a<i.length;a++){var s=i[a];s.story=this,this.slides_by_id[s.id]=s}this.status=o},e.Visualisation=r,e.initStoryPlayer=function(e,t,n,r,i,o){!function(e){window.location.href.match(/^https?:\/\/(localhost|[a-zA-Z0-9-.]+\.local)(:\d+)?(\/|$)/)?console.log("Not installing error logging on development server"):(w.config("https://30a96ee1f96d4d91b927a276b25703ce@sentry.io/150033").install(),e&&w.setUserContext({id:e.id}))}(e),Je=bt("#story iframe","story_player"),Ke=Ie(),window.Flourish=window.Flourish||{};var a=window.Flourish.app=new xt(t,n,r,i,e,o);window.addEventListener("hashchange",(function(){a.loadSlideFromHash()}))},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
